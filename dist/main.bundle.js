(()=>{"use strict";var t,e={7279:(t,e,i)=>{i.r(e)},2203:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Dummy=e.AI=void 0;const a=i(2188),n=i(6865);class o{control(t){this.body=t}handleUpdate(t){}}e.AI=o,e.Dummy=class extends o{constructor(){super(...arguments),this.direction=n.EVectorDirection.down,this.changeTime=500+Math.trunc(1500*Math.random()),this.elapsedTime=0}changeDirection(){this.direction=[n.EVectorDirection.up,n.EVectorDirection.right,n.EVectorDirection.down,n.EVectorDirection.left][Math.floor(4*Math.random())]}applyDirection(){if(null==this.body)return;let t=null;switch(this.direction){case n.EVectorDirection.up:t=a.EBodyState.walkUp;break;case n.EVectorDirection.down:t=a.EBodyState.walkDown;break;case n.EVectorDirection.right:t=a.EBodyState.walkRight;break;case n.EVectorDirection.left:t=a.EBodyState.walkLeft}null!==t&&this.body.setState(t)}handleUpdate(t){var e,i;null!==(i=null===(e=this.body)||void 0===e?void 0:e.isDead())&&void 0!==i&&i||(this.elapsedTime>=this.changeTime?(this.elapsedTime=0,this.changeDirection(),this.applyDirection()):this.elapsedTime+=t,super.handleUpdate(t))}}},4202:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Arrow=e.Projectile=void 0;const a=i(8687),n=i(6865),o=i(2188);class s extends a.Sprite{constructor({texture:t,direction:e,speed:i}){super(t),this.velocity=new n.Vector({direction:e,speed:i})}handleUpdate(t){this.velocity.move({object:this,dt:t})}}e.Projectile=s;class r extends s{constructor({direction:t,textures:e,initX:i,initY:a}){let o;switch(t){case n.EVectorDirection.up:o=e.upTexture;break;case n.EVectorDirection.down:o=e.downTexture;break;case n.EVectorDirection.right:o=e.rightTexture;break;case n.EVectorDirection.left:o=e.leftTexture}if(null==o)throw new Error("Unable to detect arrow texture by provided direction");super({texture:o,direction:t,speed:400}),this.markedForDeletion=!1,this.position.set(i+r.offset[t].x,a+r.offset[t].y)}isOutOfViewport({left:t,top:e,right:i,bottom:a}){const n=this.x,o=this.y,s=this.x+this.width,r=this.y+this.height;return s<t||n>i||r<e||o>a}isHit({enemy:t}){let e=this.x,i=this.y;const{direction:a}=this.velocity;return a===n.EVectorDirection.right&&(e+=64,i+=32),a===n.EVectorDirection.left&&(i+=32),a===n.EVectorDirection.up&&(e+=32),a===n.EVectorDirection.down&&(e+=32,i+=64),e>t.x&&e<t.x+64&&i>t.y&&i<t.y+64&&(t.setState(o.EBodyState.deadDown),!0)}}r.offset={[n.EVectorDirection.up]:{x:0,y:0},[n.EVectorDirection.right]:{x:0,y:0},[n.EVectorDirection.down]:{x:0,y:0},[n.EVectorDirection.left]:{x:0,y:0}},e.Arrow=r},5614:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Body=e.BodyAnimation=void 0;const a=i(8687),n=i(2188),o=i(5473),s=i(6865);var r;!function(t){t.standLeft="standLeft",t.standRight="standRight",t.standUp="standUp",t.standDown="standDown",t.walkLeft="walkLeft",t.walkRight="walkRight",t.walkUp="walkUp",t.walkDown="walkDown",t.attackLeft="attackLeft",t.attackRight="attackRight",t.attackUp="attackUp",t.attackDown="attackDown",t.deadDown="deadDown"}(r=e.BodyAnimation||(e.BodyAnimation={}));class h extends a.Container{constructor(t){super(),this.velocity=new s.Vector({direction:s.EVectorDirection.down,speed:0}),this.triggerAttackAnimationComplete=()=>{this.isAttacking()&&(this.currentState.completed(),"function"==typeof this.onAttackCompleted&&this.onAttackCompleted())},this.moveSpeed=t.moveSpeed,this.setup(t);const e=new a.Graphics;e.beginFill(16711935),e.drawRect(0,0,this.width,this.height),e.endFill(),e.alpha=o.logBodyBounds.enabled?.5:0,this.addChild(e),this.initialRect=e;const{offset:i,initWidth:r,initHeight:l}=h.options.collisionShape,d=new a.Graphics;d.beginFill(65535),d.drawRect(0,0,r,l),d.endFill(),d.alpha=o.logBodyBounds.enabled?.5:0,d.position.set(i.x,i.y),this.addChild(d),this.collisionShape=d;const c={body:this};this.states={[n.EBodyState.standUp]:new n.StandUp(c),[n.EBodyState.standRight]:new n.StandRight(c),[n.EBodyState.standDown]:new n.StandDown(c),[n.EBodyState.standLeft]:new n.StandLeft(c),[n.EBodyState.walkUp]:new n.WalkUp(c),[n.EBodyState.walkRight]:new n.WalkRight(c),[n.EBodyState.walkDown]:new n.WalkDown(c),[n.EBodyState.walkLeft]:new n.WalkLeft(c),[n.EBodyState.attackUp]:new n.AttackUp(c),[n.EBodyState.attackRight]:new n.AttackRight(c),[n.EBodyState.attackDown]:new n.AttackDown(c),[n.EBodyState.attackLeft]:new n.AttackLeft(c),[n.EBodyState.deadDown]:new n.DeadDown(c)}}setup({textures:{attackLeftTextures:t,attackRightTextures:e,attackUpTextures:i,attackDownTextures:n,walkLeftTextures:o,walkRightTextures:s,walkUpTextures:r,walkDownTextures:h,deadDownTextures:l},attackAnimationSpeed:d=.2,walkAnimationSpeed:c=.2,deadAnimationSpeed:p=.2}){const w=new a.Graphics;this.addChild(w),this.playerBox=w;const u=new a.Container;this.addChild(u),this.spritesContainer=u;const y=new a.Sprite(r[0]);u.addChild(y),this.standUpAnimation=y;const g=new a.Sprite(s[0]);u.addChild(g),this.standRightAnimation=g;const S=new a.Sprite(h[0]);u.addChild(S),this.standDownAnimation=S;const m=new a.Sprite(o[0]);u.addChild(m),this.standLeftAnimation=m;const D=new a.AnimatedSprite(t);D.onComplete=this.triggerAttackAnimationComplete,u.addChild(D),this.attackLeftAnimation=D;const k=new a.AnimatedSprite(e);k.onComplete=this.triggerAttackAnimationComplete,u.addChild(k),this.attackRightAnimation=k;const x=new a.AnimatedSprite(i);x.onComplete=this.triggerAttackAnimationComplete,u.addChild(x),this.attackUpAnimation=x;const b=new a.AnimatedSprite(n);b.onComplete=this.triggerAttackAnimationComplete,u.addChild(b),this.attackDownAnimation=b,D.animationSpeed=k.animationSpeed=x.animationSpeed=b.animationSpeed=d,D.loop=k.loop=x.loop=b.loop=!1;const f=new a.AnimatedSprite(o);u.addChild(f),this.walkLeftAnimation=f;const v=new a.AnimatedSprite(s);u.addChild(v),this.walkRightAnimation=v;const E=new a.AnimatedSprite(r);u.addChild(E),this.walkUpAnimation=E;const B=new a.AnimatedSprite(h);u.addChild(B),this.walkDownAnimation=B,f.animationSpeed=v.animationSpeed=E.animationSpeed=B.animationSpeed=c;const A=new a.AnimatedSprite(l);A.loop=!1,u.addChild(A),this.deadDownAnimation=A,A.animationSpeed=p}hideAllAnimations(){this.spritesContainer.children.forEach((t=>{t.visible=!1}))}switchAnimation(t){let e;switch(t){case r.standUp:e=this.standUpAnimation;break;case r.standRight:e=this.standRightAnimation;break;case r.standDown:e=this.standDownAnimation;break;case r.standLeft:e=this.standLeftAnimation;break;case r.walkUp:e=this.walkUpAnimation;break;case r.walkRight:e=this.walkRightAnimation;break;case r.walkDown:e=this.walkDownAnimation;break;case r.walkLeft:e=this.walkLeftAnimation;break;case r.attackUp:e=this.attackUpAnimation;break;case r.attackRight:e=this.attackRightAnimation;break;case r.attackDown:e=this.attackDownAnimation;break;case r.attackLeft:e=this.attackLeftAnimation;break;case r.deadDown:e=this.deadDownAnimation}e!==this.currentAnimation&&(this.currentAnimation=e,this.hideAllAnimations(),this.currentAnimation instanceof a.AnimatedSprite&&this.currentAnimation.gotoAndPlay(0),this.currentAnimation.visible=!0)}isAttacking(){return[this.attackUpAnimation,this.attackRightAnimation,this.attackDownAnimation,this.attackLeftAnimation].includes(this.currentAnimation)}isDead(){return this.currentAnimation===this.deadDownAnimation}setState(t){this.currentState=this.states[t],this.currentState.enter(t),(0,o.logBodyState)(`state=${t}`)}stop(){this.velocity.stop()}handleUpdate(t){this.currentState.handleInput(),this.isAttacking()||this.velocity.move({object:this,dt:t})}restart(){this.stop(),this.setCollisionShapePosition({x:this.initX,y:this.initY}),this.setState(n.EBodyState.standDown)}setCollisionShapePosition({x:t,y:e}){null!=t&&(this.position.x=t-this.collisionShape.position.x),null!=e&&(this.position.y=e-this.collisionShape.position.y)}getCollisionShapeBounds(t){const{position:e,width:i,height:a}=this.collisionShape,n={top:e.y,right:e.x+i,bottom:e.y+a,left:e.x};return null!=t&&(n.top=t.y+n.top,n.right=t.x+n.right,n.bottom=t.y+n.bottom,n.left=t.x+n.left),n}}h.options={collisionShape:{offset:{x:18,y:15},initWidth:28,initHeight:49}},e.Body=h},2188:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.DeadDown=e.AttackLeft=e.AttackDown=e.AttackRight=e.AttackUp=e.WalkLeft=e.WalkDown=e.WalkRight=e.WalkUp=e.StandLeft=e.StandDown=e.StandRight=e.StandUp=e.BodyState=e.EBodyState=void 0;const a=i(5614),n=i(6865);var o;!function(t){t.standLeft="standLeft",t.standRight="standRight",t.standUp="standUp",t.standDown="standDown",t.walkLeft="walkLeft",t.walkRight="walkRight",t.walkUp="walkUp",t.walkDown="walkDown",t.attackLeft="attackLeft",t.attackRight="attackRight",t.attackUp="attackUp",t.attackDown="attackDown",t.deadDown="deadDown"}(o=e.EBodyState||(e.EBodyState={}));class s{constructor({body:t,state:e}){this.body=t,this.state=e}enter(t){throw new Error("enter() not implemented in child class")}completed(){throw new Error(`completed() not implemented in child class (state=${this.state})`)}handleInput(){throw new Error("handleInput() not implemented in child class")}}e.BodyState=s,e.StandUp=class extends s{constructor({body:t}){super({body:t,state:o.standUp})}enter(t){this.body.velocity.setDirection({direction:n.EVectorDirection.up,speed:0}),this.body.switchAnimation(a.BodyAnimation.standUp)}handleInput(){throw new Error("handleInput() not implemented in child class")}},e.StandRight=class extends s{constructor({body:t}){super({body:t,state:o.standRight})}enter(t){this.body.velocity.setDirection({direction:n.EVectorDirection.right,speed:0}),this.body.switchAnimation(a.BodyAnimation.standRight)}handleInput(){throw new Error("handleInput() not implemented in child class")}},e.StandDown=class extends s{constructor({body:t}){super({body:t,state:o.standDown})}enter(t){this.body.velocity.setDirection({direction:n.EVectorDirection.down,speed:0}),this.body.switchAnimation(a.BodyAnimation.standDown)}handleInput(){throw new Error("handleInput() not implemented in child class")}},e.StandLeft=class extends s{constructor({body:t}){super({body:t,state:o.standLeft})}enter(t){this.body.velocity.setDirection({direction:n.EVectorDirection.left,speed:0}),this.body.switchAnimation(a.BodyAnimation.standLeft)}handleInput(){throw new Error("handleInput() not implemented in child class")}},e.WalkUp=class extends s{constructor({body:t}){super({body:t,state:o.walkUp})}enter(t){this.body.velocity.setDirection({direction:n.EVectorDirection.up,speed:this.body.moveSpeed}),this.body.switchAnimation(a.BodyAnimation.walkUp)}handleInput(){throw new Error("handleInput() not implemented in child class")}},e.WalkRight=class extends s{constructor({body:t}){super({body:t,state:o.walkRight})}enter(t){this.body.velocity.setDirection({direction:n.EVectorDirection.right,speed:this.body.moveSpeed}),this.body.switchAnimation(a.BodyAnimation.walkRight)}handleInput(){throw new Error("handleInput() not implemented in child class")}},e.WalkDown=class extends s{constructor({body:t}){super({body:t,state:o.walkDown})}enter(t){this.body.velocity.setDirection({direction:n.EVectorDirection.down,speed:this.body.moveSpeed}),this.body.switchAnimation(a.BodyAnimation.walkDown)}handleInput(){throw new Error("handleInput() not implemented in child class")}},e.WalkLeft=class extends s{constructor({body:t}){super({body:t,state:o.walkLeft})}enter(t){this.body.velocity.setDirection({direction:n.EVectorDirection.left,speed:this.body.moveSpeed}),this.body.switchAnimation(a.BodyAnimation.walkLeft)}handleInput(){throw new Error("handleInput() not implemented in child class")}},e.AttackUp=class extends s{constructor({body:t}){super({body:t,state:o.attackUp})}enter(t){this.body.stop(),this.body.switchAnimation(a.BodyAnimation.attackUp)}completed(){this.body.setState(o.standUp)}handleInput(){throw new Error("handleInput() not implemented in child class")}},e.AttackRight=class extends s{constructor({body:t}){super({body:t,state:o.attackRight})}enter(t){this.body.stop(),this.body.switchAnimation(a.BodyAnimation.attackRight)}completed(){this.body.setState(o.standRight)}handleInput(){throw new Error("handleInput() not implemented in child class")}},e.AttackDown=class extends s{constructor({body:t}){super({body:t,state:o.attackDown})}enter(t){this.body.stop(),this.body.switchAnimation(a.BodyAnimation.attackDown)}completed(){this.body.setState(o.standDown)}handleInput(){throw new Error("handleInput() not implemented in child class")}},e.AttackLeft=class extends s{constructor({body:t}){super({body:t,state:o.attackLeft})}enter(t){this.body.stop(),this.body.switchAnimation(a.BodyAnimation.attackLeft)}completed(){this.body.setState(o.standLeft)}handleInput(){throw new Error("handleInput() not implemented in child class")}},e.DeadDown=class extends s{constructor({body:t}){super({body:t,state:o.deadDown})}enter(t){this.body.stop(),this.body.switchAnimation(a.BodyAnimation.deadDown)}handleInput(){throw new Error("handleInput() not implemented in child class")}}},225:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Camera=void 0;class i{constructor(t){this.tileMap=t.tileMap}watch(t){this.watchObject=t}handleUpdate(t){if(null==this.watchObject)return;const{pivot:e,viewWidth:a,viewHeight:n,background:{width:o,height:s}}=this.tileMap,{scrollEdge:r}=i.options,h=a>o?o:a,l=n>s?s:n,d=this.watchObject.x+this.watchObject.width/2,c=this.watchObject.y+this.watchObject.height/2;d>e.x+h-r?e.x=d-h+r:d<e.x+r&&(e.x=d-r),e.x<0?e.x=0:e.x>this.tileMap.maxXPivot&&(e.x=this.tileMap.maxXPivot),c>e.y+l-r?e.y=c-l+r:c<e.y+r&&(e.y=c-r),e.y<0?e.y=0:e.y>this.tileMap.maxYPivot&&(e.y=this.tileMap.maxYPivot)}}i.options={scrollEdge:100},e.Camera=i},7524:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Collider=void 0,e.Collider=class{constructor(){this.staticShapes=[],this.bodies=[],this.levelBounds={top:0,right:0,bottom:0,left:0}}handleUpdate(t){this.checkStatic(t)}addKinematicBody(t){this.bodies.push({x:t.x,initX:t.x,y:t.y,initY:t.y,obj:t})}restart({staticShapes:t,bodies:e,levelBounds:i}){this.staticShapes=Array.isArray(t)?t:[],this.bodies=[],Array.isArray(e)&&e.forEach((t=>{this.addKinematicBody(t)})),Object.assign(this.levelBounds,i)}checkStatic(t){this.bodies.forEach((t=>{const e=t.x,i=t.y;let a=t.obj.x,n=t.obj.y;const{x:o,y:s,width:r,height:h}=t.obj.collisionShape,l=o+r,d=s+h;a>e&&(a+l>this.levelBounds.right&&(a=Math.min(a+l,this.levelBounds.right)-o-r),this.staticShapes.forEach((t=>{e-1+l<t.x&&a+l>t.x&&n+s<t.y+t.height&&n+d>t.y&&(a=Math.min(a+l,t.x)-o-r)}))),a<e&&(a+o<this.levelBounds.left&&(a=Math.max(a+o,this.levelBounds.left)-o),this.staticShapes.forEach((t=>{e+1+o>t.x+t.width&&a+o<t.x+t.width&&n+s<t.y+t.height&&n+d>t.y&&(a=Math.max(a+o,t.x+t.width)-o)}))),n>i&&(n+d>this.levelBounds.bottom&&(n=Math.min(n+d,this.levelBounds.bottom)-s-h),this.staticShapes.forEach((t=>{i-1+d<t.y&&n+d>t.y&&a+o<t.x+t.width&&a+l>t.x&&(n=Math.min(n+d,t.y)-s-h)}))),n<i&&(n+s<this.levelBounds.top&&(n=Math.max(n+s,this.levelBounds.top)-s),this.staticShapes.forEach((t=>{i+1+s>t.y+t.height&&n+s<t.y+t.height&&a+o<t.x+t.width&&a+l>t.x&&(n=Math.max(n+s,t.y+t.height)-s)}))),t.x=a,t.y=n,t.obj.x=a,t.obj.y=n}))}}},9221:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Game=void 0;const a=i(8687),n=i(4778),o=i(8554),s=i(6879),r=i(1664),h=i(665),l=i(225),d=i(7524),c=i(5473);class p extends a.Container{constructor(t){super(),this.gameEnded=!1,this.time=0,this.currentLevel=p.options.startLevel,this.startGame=()=>{this.startModal.visible=!1,this.gameEnded=!1,this.time=0,this.currentLevel=p.options.startLevel,this.runLevel(),this.inputHandler.restart()},this.viewWidth=t.viewWidth,this.viewHeight=t.viewHeight,this.setup(t),this.addEventLesteners(),this.runLevel(),setTimeout((()=>{this.tileMap.idleLoad().catch(console.error)}),2e3)}setup({viewWidth:t,viewHeight:e,textures:{elvenTextures:i,orcTextures:a,arrowTextures:c}}){this.tileMap=new h.TileMap({viewWidth:t,viewHeight:e,orcTextures:a,onEnemiesUpdate:()=>{this.statusBar.updateOrcs(this.tileMap.getLiveEnemiesCount())}}),this.addChild(this.tileMap),this.statusBar=new o.StatusBar,this.addChild(this.statusBar),this.inputHandler=new r.InputHandler({eventTarget:this.tileMap}),this.player=new n.Player({game:this,textures:{arrowTextures:c,elvenTextures:i}}),this.camera=new l.Camera({tileMap:this.tileMap}),this.camera.watch(this.player),this.tileMap.addPlayer(this.player),this.startModal=new s.StartModal({viewWidth:t,viewHeight:e}),this.startModal.visible=!1,this.addChild(this.startModal),this.inputHandler.relativeToTarget=this.player,this.collider=new d.Collider}addEventLesteners(){this.startModal.on("click",this.startGame)}endGame(t=!1){this.gameEnded=!0,this.player.stop(),this.startModal.visible=!0,t?this.startModal.win("Win!!"):this.startModal.lose("You lose!")}handleResize({viewWidth:t,viewHeight:e}){this.tileMap.handleResize({viewWidth:t,viewHeight:e});const i=t,a=e,n=this.tileMap.background.width,o=this.tileMap.background.height,s=i>n?(i-n)/2:0,r=a>o?(a-o)/2:0;(0,c.logLayout)(`aw=${i} (ow=${n}) x=${s} ah=${a} (oh=${o}) y=${r}`),this.statusBar.visible=!1,this.x=s,this.y=r,(0,c.logLayout)(`x=${s} y=${r}`),this.statusBar.visible=!0;const h=i>n?n:i,l=a>o?o:a;this.statusBar.position.set(h/2-this.statusBar.width/2,0),this.startModal.position.set(h/2-this.startModal.width/2,l/2-this.startModal.height/2)}handleUpdate(t){this.gameEnded||(this.time+=t,this.statusBar.updateTime(this.time),this.time>p.options.maxTime?this.endGame():(this.player.handleUpdate(t),this.tileMap.handleUpdate(t),this.collider.handleUpdate(t),this.camera.handleUpdate(t),this.player.isDead()?this.endGame(!1):this.tileMap.getLiveEnemiesCount()<=0&&this.runLevel(!0)))}runLevel(t){if(!0===t&&this.currentLevel++,this.currentLevel>p.options.maxLevel)return void this.endGame(!0);this.tileMap.restart(),this.tileMap.cleanFromAll();const{playerPoint:e}=this.tileMap.initLevel(this.currentLevel);this.player.initX=e.x,this.player.initY=e.y,this.player.restart(),this.collider.restart({staticShapes:this.tileMap.hitboxes.children,bodies:[this.player,...this.tileMap.enemies.children],levelBounds:{top:0,left:0,right:this.tileMap.background.width,bottom:this.tileMap.background.height}}),this.statusBar.updateLevel(this.currentLevel),this.statusBar.updateOrcs(this.tileMap.getLiveEnemiesCount())}}p.options={maxTime:6e5,startLevel:1,maxLevel:2},e.Game=p},1519:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Hitbox=void 0;const a=i(8687),n=i(5473);class o extends a.Graphics{constructor({initX:t,initY:e,initWidth:i,initHeight:a}){super(),this.beginFill(16711680),this.drawRect(0,0,i,a),this.endFill(),this.alpha=n.logHitboxes.enabled?.5:0,this.position.set(t,e)}getRectBounds(){return{top:this.y,right:this.x+this.width,bottom:this.y+this.height,left:this.x}}}e.Hitbox=o},1664:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.InputHandler=void 0;const a=i(5473);e.InputHandler=class{constructor({eventTarget:t,interactiveChildren:e=!1}){this.pointerXDown=null,this.pointerYDown=null,this.pointerSpecial=!1,this.handlePointerDown=t=>{this.handlePlayerMove(!0,t)},this.handlePointerMove=t=>{this.handlePlayerMove(void 0,t)},this.handlePointerUp=t=>{this.handlePlayerMove(!1,t)},this.handleKeyDown=t=>{switch((0,a.logKeydown)(`${t.code} ${t.key}`),t.code){case"KeyW":case"ArrowUp":this.applyUpDirection(!0);break;case"KeyA":case"ArrowLeft":this.applyLeftDirection(!0);break;case"KeyD":case"ArrowRight":this.applyRightDirection(!0);break;case"KeyS":case"ArrowDown":this.applyDownDirection(!0);break;case"ShiftLeft":case"ControlLeft":case"Space":this.pointerSpecial=!0}},this.handleKeyUp=t=>{switch((0,a.logKeyup)(`${t.code} ${t.key}`),t.code){case"KeyW":case"ArrowUp":this.applyUpDirection(!1);break;case"KeyA":case"ArrowLeft":this.applyLeftDirection(!1);break;case"KeyD":case"ArrowRight":this.applyRightDirection(!1);break;case"KeyS":case"ArrowDown":this.applyDownDirection(!1);break;case"ShiftLeft":case"ControlLeft":case"Space":this.pointerSpecial=!1}},this.eventTarget=t,this.interactiveChildren=e,this.addEventLesteners()}addEventLesteners(){this.eventTarget.interactive=!0,this.eventTarget.on("pointerdown",this.handlePointerDown),this.eventTarget.on("pointermove",this.handlePointerMove),this.eventTarget.on("pointerup",this.handlePointerUp),window.addEventListener("keydown",this.handleKeyDown),window.addEventListener("keyup",this.handleKeyUp)}handlePlayerMove(t,e){const i=e.global;(0,a.logPointerEvent)(`${e.type} px=${i.x} py=${i.y}`),this.applyPointerToDirection(t,i.x,i.y)}applyUpDirection(t){t&&(this.pointerXDown=null!=this.pointerXDown?0:null),this.pointerYDown=t?-1:-1===this.pointerYDown?null:this.pointerYDown,(0,a.logInputDirection)(`UP px=${this.pointerXDown} py=${this.pointerYDown}`)}applyDownDirection(t){t&&(this.pointerXDown=null!=this.pointerXDown?0:null),this.pointerYDown=t?1:1===this.pointerYDown?null:this.pointerYDown,(0,a.logInputDirection)(`DOWN px=${this.pointerXDown} py=${this.pointerYDown}`)}applyLeftDirection(t){t&&(this.pointerYDown=null!=this.pointerYDown?0:null),this.pointerXDown=t?-1:-1===this.pointerXDown?null:this.pointerXDown,(0,a.logInputDirection)(`LEFT px=${this.pointerXDown} py=${this.pointerYDown}`)}applyRightDirection(t){t&&(this.pointerYDown=null!=this.pointerYDown?0:null),this.pointerXDown=t?1:1===this.pointerXDown?null:this.pointerXDown,(0,a.logInputDirection)(`RIGHT px=${this.pointerXDown} py=${this.pointerYDown}`)}isPointerDown(){return null!==this.pointerXDown||null!==this.pointerYDown}hasDirectionLeft(){return null!==this.pointerXDown&&this.pointerXDown<0}hasDirectionRight(){return null!==this.pointerXDown&&this.pointerXDown>0}hasDirectionUp(){return null!==this.pointerYDown&&this.pointerYDown<0}hasDirectionDown(){return null!==this.pointerYDown&&this.pointerYDown>0}hasSpecial(){return this.pointerSpecial}applyPointerToDirection(t,e,i){const{relativeToTarget:n}=this;if(this.pointerSpecial=!1,!0===t||void 0===t&&this.isPointerDown()){const t=n.getGlobalPosition(),o=n.getCollisionShapeBounds(t),s=Math.abs(e-t.x),r=Math.abs(i-t.y);e>=o.left&&e<=o.right?(this.pointerXDown=null,i>=o.bottom?this.pointerYDown=1:i<=o.top?this.pointerYDown=-1:this.pointerSpecial=!0):i>=o.top&&i<=o.bottom?(this.pointerYDown=null,e>o.right?this.pointerXDown=1:e<o.left?this.pointerXDown=-1:this.pointerSpecial=!0):s>=r?(this.pointerYDown=0,e>o.right?this.pointerXDown=1:e<o.left&&(this.pointerXDown=-1)):(this.pointerXDown=0,i>o.bottom?this.pointerYDown=1:i<o.top&&(this.pointerYDown=-1)),(0,a.logInputDirection)(`MOVE|START px=${this.pointerXDown} py=${this.pointerYDown} rt=${Boolean(n)}`)}else!1===t&&(this.pointerXDown=null,this.pointerYDown=null,(0,a.logInputDirection)(`END px=${this.pointerXDown} py=${this.pointerYDown}`))}restart(){this.pointerXDown=null,this.pointerYDown=null}}},1557:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.LoaderScene=e.manifest=void 0;const a=i(8687),n=i(5473);e.manifest={bundles:[{name:"initial-bundle",assets:{spritesheet:"assets/spritesheets/spritesheet.json",level1Background:"assets/levels/level-1.png",level1Settings:"assets/levels/level-1.json"}},{name:"level-2-bundle",assets:{level2Background:"assets/levels/level-2.png",level2Settings:"assets/levels/level-2.json"}}]};class o extends a.Container{constructor(t){super(),this.downloadProgress=t=>{this.loaderBarFill.width=(o.barOptions.width-2*o.barOptions.borderThick)*t},this.setup(),this.draw()}setup(){const t=new a.Graphics;this.addChild(t),this.loaderBarBorder=t;const e=new a.Graphics;this.addChild(e),this.loaderBarFill=e}draw(){const{barOptions:t}=o,{loaderBarFill:e,loaderBarBorder:i}=this;i.beginFill(t.borderColor),i.drawRoundedRect(0,0,t.width,t.height,t.borderRadius),i.endFill(),e.beginFill(t.fillColor),e.drawRoundedRect(t.borderThick,t.borderThick,t.width-2*t.borderThick,t.height-2*t.borderThick,t.borderRadius),e.endFill()}async initializeLoader(){await a.Assets.init({manifest:e.manifest}),await a.Assets.loadBundle(e.manifest.bundles[0].name,this.downloadProgress)}getAssets(){return{spritesheet:a.Assets.get("spritesheet"),levelBackground:a.Assets.get("levelBackground"),levelSettings:a.Assets.get("levelSettings")}}handleResize({viewWidth:t,viewHeight:e}){const i=t,a=e,s=this.width,r=this.height;if(i>=s&&a>=r){const t=i>s?(i-s)/2:0,e=a>r?(a-r)/2:0;(0,n.logLayout)(`Spacing aw=${i} tw=${s} ah=${a} th=${r}`),this.x=t,this.width=o.barOptions.width,this.y=e,this.height=o.barOptions.height}else{let t=1;r>=s?(t=a/r,t*s>i&&(t=i/s),(0,n.logLayout)(`By height (sc=${t})`)):(t=i/s,(0,n.logLayout)(`By width (sc=${t})`),t*r>a&&(t=a/r));const e=Math.floor(s*t),o=Math.floor(r*t),h=i>e?(i-e)/2:0,l=a>o?(a-o)/2:0;(0,n.logLayout)(`aw=${i} (ow=${e}) ah=${a} (oh=${o})`),this.x=h,this.width=e,this.y=l,this.height=o}(0,n.logLayout)(`x=${this.x} y=${this.y} w=${this.width} h=${this.height}`)}handleMounted(){}handleUpdate(){}}o.barOptions={width:350,height:40,fillColor:1588688,borderRadius:5,borderThick:5,borderColor:0},e.LoaderScene=o},6168:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.MainScene=void 0;const a=i(8687),n=i(9221);class o extends a.Container{constructor(t){super(),this.gravity=.7,this.gameEnded=!1,this.setup(t)}setup({viewWidth:t,viewHeight:e,textures:i}){const a=new n.Game({viewWidth:t,viewHeight:e,textures:i});this.addChild(a),this.game=a}handleResize(t){this.game.handleResize(t)}handleUpdate(t){this.game.handleUpdate(t)}}e.MainScene=o},5502:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.MapSettings=void 0;class i{static findTileLayer({name:t,mapSettings:e}){const i=e.layers.find((e=>"tilelayer"===e.type&&e.name===t));if(null==i)throw new Error(`Unable to detect "${t}" tile layer`);return i}static findObjectGroupLayer({name:t,mapSettings:e}){const i=e.layers.find((e=>"objectgroup"===e.type&&e.name===t));if(null==i)throw new Error(`Unable to detect "${t}" object group layer`);return i}static mapObjectToPositions({mapSettings:t,layerName:e}){const a=[],n=i.findObjectGroupLayer({name:e,mapSettings:t});for(let t=0;t<n.objects.length;t++){const e=n.objects[t];a.push({x:e.x,y:e.y,width:e.width,height:e.height})}return a}static mapTilesToPositions({mapSettings:t,layerName:e,tileIds:a}){const n=[],o=i.findTileLayer({name:e,mapSettings:t}),s=t.width;for(let e=0;e<o.data.length;e+=s)o.data.slice(e,e+s).forEach(((i,o)=>{(Array.isArray(a)&&a.includes(i)||0!==i)&&n.push({x:o*t.tilewidth,y:e/s*t.tileheight,width:t.tilewidth,height:t.tileheight})}));return n}}e.MapSettings=i},9713:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Orc=void 0;const a=i(2203),n=i(5614),o=i(2188);class s extends n.Body{constructor(t){super({...t,moveSpeed:100}),this.ai=new a.Dummy,this.jump=30,this.halfJUmp=this.jump/2,this.sword=5,this.ai.control(this)}handleUpdate(t){this.isDead()||(this.ai.handleUpdate(t),this.isAttacking()||this.velocity.move({object:this,dt:t}))}restart(){this.stop(),this.setCollisionShapePosition({x:this.initX,y:this.initY}),this.setState(o.EBodyState.standDown)}canJumpAndHit({top:t,right:e,bottom:i,left:a}){const n=this.getCollisionShapeBounds(this),{jump:s,halfJUmp:r,sword:h}=this,{width:l,height:d}=this.collisionShape;return e>n.left-s&&e<n.left&&i>n.top-r&&t<n.bottom+r?(this.setState(o.EBodyState.attackLeft),this.setCollisionShapePosition({x:e+h,y:t}),!0):i>n.top-s&&i<n.top&&e>n.left-r&&a<n.right+r?(this.setState(o.EBodyState.attackUp),this.setCollisionShapePosition({x:a,y:i}),!0):a<n.right+s&&a>n.right&&i>n.top-r&&t<n.bottom+r?(this.setState(o.EBodyState.attackRight),this.setCollisionShapePosition({x:a-h-l,y:t}),!0):t<n.bottom+s&&t>n.bottom&&e>n.left-r&&a<n.right+r&&(this.setState(o.EBodyState.attackDown),this.setCollisionShapePosition({x:a,y:t-d}),!0)}}e.Orc=s},4778:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Player=void 0;const a=i(3329),n=i(5614),o=i(2188),s=i(4202),r=i(7049);class h extends n.Body{constructor(t){super({textures:t.textures.elvenTextures,moveSpeed:200,attackAnimationSpeed:.6}),this.game=t.game,this.arrowTextures=t.textures.arrowTextures;const e={player:this,inputHandler:this.game.inputHandler};this.states={[o.EBodyState.standUp]:new a.PlayerStandUp(e),[o.EBodyState.standRight]:new a.PlayerStandRight(e),[o.EBodyState.standDown]:new a.PlayerStandDown(e),[o.EBodyState.standLeft]:new a.PlayerStandLeft(e),[o.EBodyState.walkUp]:new a.PlayerWalkUp(e),[o.EBodyState.walkRight]:new a.PlayerWalkRight(e),[o.EBodyState.walkDown]:new a.PlayerWalkDown(e),[o.EBodyState.walkLeft]:new a.PlayerWalkLeft(e),[o.EBodyState.attackUp]:new a.PlayerAttackUp(e),[o.EBodyState.attackRight]:new a.PlayerAttackRight(e),[o.EBodyState.attackDown]:new a.PlayerAttackDown(e),[o.EBodyState.attackLeft]:new a.PlayerAttackLeft(e),[o.EBodyState.deadDown]:new a.PlayerDeadDown(e)},this.onAttackCompleted=this.shootArrow}handleUpdate(t){super.handleUpdate(t)}shootArrow(){r.AUDIO.arrow.play();const t=new s.Arrow({textures:this.arrowTextures,direction:this.velocity.direction,initX:this.x,initY:this.y});this.game.tileMap.arrows.addChild(t)}}e.Player=h},3329:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PlayerDeadDown=e.PlayerAttackLeft=e.PlayerAttackDown=e.PlayerAttackRight=e.PlayerAttackUp=e.PlayerWalkLeft=e.PlayerWalkDown=e.PlayerWalkRight=e.PlayerWalkUp=e.PlayerStandLeft=e.PlayerStandDown=e.PlayerStandRight=e.PlayerStandUp=void 0;const a=i(2188),n=i(5473);class o extends a.StandUp{constructor({player:t,inputHandler:e}){super({body:t}),this.inputHandler=e}enter(t){super.enter(t),(0,n.logPlayerState)(`state=${t}`)}handleInput(){const{inputHandler:t,body:e}=this;t.hasDirectionUp()?e.setState(a.EBodyState.walkUp):t.hasDirectionRight()?e.setState(a.EBodyState.walkRight):t.hasDirectionDown()?e.setState(a.EBodyState.walkDown):t.hasDirectionLeft()?e.setState(a.EBodyState.walkLeft):t.hasSpecial()&&e.setState(a.EBodyState.attackUp)}}e.PlayerStandUp=o;class s extends a.StandRight{constructor({player:t,inputHandler:e}){super({body:t}),this.inputHandler=e}enter(t){super.enter(t),(0,n.logPlayerState)(`state=${t}`)}handleInput(){const{inputHandler:t,body:e}=this;t.hasDirectionUp()?e.setState(a.EBodyState.walkUp):t.hasDirectionRight()?e.setState(a.EBodyState.walkRight):t.hasDirectionDown()?e.setState(a.EBodyState.walkDown):t.hasDirectionLeft()?e.setState(a.EBodyState.walkLeft):t.hasSpecial()&&e.setState(a.EBodyState.attackRight)}}e.PlayerStandRight=s;class r extends a.StandDown{constructor({player:t,inputHandler:e}){super({body:t}),this.inputHandler=e}enter(t){super.enter(t),(0,n.logPlayerState)(`state=${t}`)}handleInput(){const{inputHandler:t,body:e}=this;t.hasDirectionUp()?e.setState(a.EBodyState.walkUp):t.hasDirectionRight()?e.setState(a.EBodyState.walkRight):t.hasDirectionDown()?e.setState(a.EBodyState.walkDown):t.hasDirectionLeft()?e.setState(a.EBodyState.walkLeft):t.hasSpecial()&&e.setState(a.EBodyState.attackDown)}}e.PlayerStandDown=r;class h extends a.StandLeft{constructor({player:t,inputHandler:e}){super({body:t}),this.inputHandler=e}enter(t){super.enter(t),(0,n.logPlayerState)(`state=${t}`)}handleInput(){const{inputHandler:t,body:e}=this;t.hasDirectionUp()?e.setState(a.EBodyState.walkUp):t.hasDirectionRight()?e.setState(a.EBodyState.walkRight):t.hasDirectionDown()?e.setState(a.EBodyState.walkDown):t.hasDirectionLeft()?e.setState(a.EBodyState.walkLeft):t.hasSpecial()&&e.setState(a.EBodyState.attackLeft)}}e.PlayerStandLeft=h;class l extends a.WalkUp{constructor({player:t,inputHandler:e}){super({body:t}),this.inputHandler=e}enter(t){super.enter(t),(0,n.logPlayerState)(`state=${t}`)}handleInput(){const{inputHandler:t,body:e}=this;t.hasDirectionRight()?e.setState(a.EBodyState.walkRight):t.hasDirectionDown()?e.setState(a.EBodyState.walkDown):t.hasDirectionLeft()?e.setState(a.EBodyState.walkLeft):t.hasSpecial()?e.setState(a.EBodyState.attackUp):t.hasDirectionUp()||e.setState(a.EBodyState.standUp)}}e.PlayerWalkUp=l;class d extends a.WalkRight{constructor({player:t,inputHandler:e}){super({body:t}),this.inputHandler=e}enter(t){super.enter(t),(0,n.logPlayerState)(`state=${t}`)}handleInput(){const{inputHandler:t,body:e}=this;t.hasDirectionUp()?e.setState(a.EBodyState.walkUp):t.hasDirectionDown()?e.setState(a.EBodyState.walkDown):t.hasDirectionLeft()?e.setState(a.EBodyState.walkLeft):t.hasSpecial()?e.setState(a.EBodyState.attackRight):t.hasDirectionRight()||e.setState(a.EBodyState.standRight)}}e.PlayerWalkRight=d;class c extends a.WalkDown{constructor({player:t,inputHandler:e}){super({body:t}),this.inputHandler=e}enter(t){super.enter(t),(0,n.logPlayerState)(`state=${t}`)}handleInput(){const{inputHandler:t,body:e}=this;t.hasDirectionUp()?e.setState(a.EBodyState.walkUp):t.hasDirectionRight()?e.setState(a.EBodyState.walkRight):t.hasDirectionLeft()?e.setState(a.EBodyState.walkLeft):t.hasSpecial()?e.setState(a.EBodyState.attackDown):t.hasDirectionDown()||e.setState(a.EBodyState.standDown)}}e.PlayerWalkDown=c;class p extends a.WalkLeft{constructor({player:t,inputHandler:e}){super({body:t}),this.inputHandler=e}enter(t){super.enter(t),(0,n.logPlayerState)(`state=${t}`)}handleInput(){const{inputHandler:t,body:e}=this;t.hasDirectionUp()?e.setState(a.EBodyState.walkUp):t.hasDirectionRight()?e.setState(a.EBodyState.walkRight):t.hasDirectionDown()?e.setState(a.EBodyState.walkDown):t.hasSpecial()?e.setState(a.EBodyState.attackLeft):t.hasDirectionLeft()||e.setState(a.EBodyState.standLeft)}}e.PlayerWalkLeft=p;class w extends a.AttackUp{constructor({player:t,inputHandler:e}){super({body:t}),this.inputHandler=e}enter(t){super.enter(t),(0,n.logPlayerState)(`state=${t}`)}handleInput(){const{inputHandler:t,body:e}=this;t.hasSpecial()?t.hasDirectionUp()?e.setState(a.EBodyState.attackUp):t.hasDirectionRight()?e.setState(a.EBodyState.attackRight):t.hasDirectionDown()?e.setState(a.EBodyState.attackDown):t.hasDirectionLeft()&&e.setState(a.EBodyState.attackLeft):t.hasDirectionUp()?e.setState(a.EBodyState.walkUp):t.hasDirectionRight()?e.setState(a.EBodyState.walkRight):t.hasDirectionDown()?e.setState(a.EBodyState.walkDown):t.hasDirectionLeft()&&e.setState(a.EBodyState.walkLeft)}}e.PlayerAttackUp=w;class u extends a.AttackRight{constructor({player:t,inputHandler:e}){super({body:t}),this.inputHandler=e}enter(t){super.enter(t),(0,n.logPlayerState)(`state=${t}`)}handleInput(){const{inputHandler:t,body:e}=this;t.hasSpecial()?t.hasDirectionUp()?e.setState(a.EBodyState.attackUp):t.hasDirectionRight()?e.setState(a.EBodyState.attackRight):t.hasDirectionDown()?e.setState(a.EBodyState.attackDown):t.hasDirectionLeft()&&e.setState(a.EBodyState.attackLeft):t.hasDirectionUp()?e.setState(a.EBodyState.walkUp):t.hasDirectionRight()?e.setState(a.EBodyState.walkRight):t.hasDirectionDown()?e.setState(a.EBodyState.walkDown):t.hasDirectionLeft()&&e.setState(a.EBodyState.walkLeft)}}e.PlayerAttackRight=u;class y extends a.AttackDown{constructor({player:t,inputHandler:e}){super({body:t}),this.inputHandler=e}enter(t){super.enter(t),(0,n.logPlayerState)(`state=${t}`)}handleInput(){const{inputHandler:t,body:e}=this;t.hasSpecial()?t.hasDirectionUp()?e.setState(a.EBodyState.attackUp):t.hasDirectionRight()?e.setState(a.EBodyState.attackRight):t.hasDirectionDown()?e.setState(a.EBodyState.attackDown):t.hasDirectionLeft()&&e.setState(a.EBodyState.attackLeft):t.hasDirectionUp()?e.setState(a.EBodyState.walkUp):t.hasDirectionRight()?e.setState(a.EBodyState.walkRight):t.hasDirectionDown()?e.setState(a.EBodyState.walkDown):t.hasDirectionLeft()&&e.setState(a.EBodyState.walkLeft)}}e.PlayerAttackDown=y;class g extends a.AttackLeft{constructor({player:t,inputHandler:e}){super({body:t}),this.inputHandler=e}enter(t){super.enter(t),(0,n.logPlayerState)(`state=${t}`)}handleInput(){const{inputHandler:t,body:e}=this;t.hasSpecial()?t.hasDirectionUp()?e.setState(a.EBodyState.attackUp):t.hasDirectionRight()?e.setState(a.EBodyState.attackRight):t.hasDirectionDown()?e.setState(a.EBodyState.attackDown):t.hasDirectionLeft()&&e.setState(a.EBodyState.attackLeft):t.hasDirectionUp()?e.setState(a.EBodyState.walkUp):t.hasDirectionRight()?e.setState(a.EBodyState.walkRight):t.hasDirectionDown()?e.setState(a.EBodyState.walkDown):t.hasDirectionLeft()&&e.setState(a.EBodyState.walkLeft)}}e.PlayerAttackLeft=g;class S extends a.DeadDown{enter(t){super.enter(t),(0,n.logPlayerState)(`state=${t}`)}constructor({player:t,inputHandler:e}){super({body:t}),this.inputHandler=e}}e.PlayerDeadDown=S},3110:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.SceneManager=void 0;const a=i(8687),n=i(5473);class o extends a.Container{init(){}handleUpdate(){}handleResize(){}}class s{constructor(){}static get width(){return window.innerWidth}static get height(){return window.innerHeight}static async initialize(){var t;const e=new a.Application({autoDensity:!0,resolution:null!==(t=window.devicePixelRatio)&&void 0!==t?t:1,width:s.width,height:s.height,resizeTo:window});document.body.appendChild(e.view),n.logApp.enabled&&((0,n.logApp)("window.app initialized!"),window.app=e),s.app=e,s.setupEventLesteners()}static setupEventLesteners(){window.addEventListener("resize",s.resizeDeBounce),s.app.ticker.add(s.updateHandler)}static async changeScene(t){s.app.stage.removeChild(s.currentScene),s.currentScene.destroy(),s.currentScene=t,s.app.stage.addChild(s.currentScene),s.resizeHandler()}static resizeDeBounce(){s.cancelScheduledResizeHandler(),s.scheduleResizeHandler()}static cancelScheduledResizeHandler(){clearTimeout(s.resizeTimeoutId)}static scheduleResizeHandler(){s.resizeTimeoutId=setTimeout((()=>{s.cancelScheduledResizeHandler(),s.resizeHandler()}),s.resizeTimeout)}static resizeHandler(){s.currentScene.handleResize({viewWidth:s.width,viewHeight:s.height})}static updateHandler(){s.currentScene.handleUpdate(s.app.ticker.deltaMS)}}s.currentScene=new o,s.resizeTimeout=300,e.SceneManager=s},6879:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.StartModal=void 0;const a=i(8687);class n extends a.Container{constructor(t){super(),this.boxOptions={fill:16777215,width:300,height:200,borderRadius:5},this.reasonTextOptions={top:-50,textColor:0,textSize:40,fontWeight:"bold"},this.buttonOptions={top:120,left:50,width:200,height:50,fill:16777215,fillError:10105874,fillSuccess:2278750,borderRadius:10},this.buttonTextOptions={top:95,textColor:16777215,textSize:20},this.setup(t),this.draw(t),this.setupEventListeners()}setup(t){this.modalBox=new a.Graphics,this.addChild(this.modalBox);const{boxOptions:e,reasonTextOptions:i,buttonTextOptions:n}=this;this.reasonText=new a.Text("-",{fontSize:i.textSize,fill:i.textColor,fontWeight:i.fontWeight}),this.reasonText.anchor.set(.5,.5),this.reasonText.position.set(e.width/2,e.height/2+i.top),this.addChild(this.reasonText),this.button=new a.Graphics,this.button.interactive=!0,this.button.cursor="pointer",this.addChild(this.button),this.buttonText=new a.Text("Start Game",{fontSize:n.textSize,fill:n.textColor}),this.buttonText.anchor.set(.5,.5),this.buttonText.position.set(e.width/2,e.height/2/2+n.top),this.button.addChild(this.buttonText)}draw(t){const{boxOptions:e,buttonOptions:i}=this;this.modalBox.beginFill(e.fill),this.modalBox.drawRoundedRect(0,0,e.width,e.height,e.borderRadius),this.modalBox.endFill(),this.button.beginFill(i.fill),this.button.drawRoundedRect(i.left,i.top,i.width,i.height,i.borderRadius),this.button.endFill()}setupEventListeners(){this.button.on("pointertap",(t=>{this.emit("click",t)}))}win(t){this.reasonText.text=t,this.button.tint=this.buttonOptions.fillSuccess}lose(t){this.reasonText.text=t,this.button.tint=this.buttonOptions.fillError}}e.StartModal=n},8554:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.StatusBar=void 0;const a=i(8687);class n extends a.Container{constructor(){super(),this.setup()}static getLevelText(t){return`Level: ${t}`}static getOrcsText(t){return`Orc(s): ${t}`}static getTimeText(t){return`Time: ${t}`}setup(){const{options:{padding:t,textSize:e,textColor:i,textShadowOffset:o,textColorShadow:s}}=n,r=new a.Text(n.getLevelText(0),{fontSize:.8*e,fill:s,align:"center"});r.position.set(0,t),this.addChild(r),this.levelTextShadow=r;const h=new a.Text(n.getLevelText(0),{fontSize:.8*e,fill:i,align:"center"});h.position.set(0+o,t+o),this.addChild(h),this.levelText=h;const l=new a.Text(n.getOrcsText(0),{fontSize:.8*e,fill:s,align:"center"});l.position.set(r.x+r.width+2*t,r.y),this.addChild(l),this.orcsTextShadow=l;const d=new a.Text(n.getOrcsText(0),{fontSize:.8*e,fill:i,align:"center"});d.position.set(h.x+h.width+2*t,h.y),this.addChild(d),this.orcsText=d;const c=this.width/2,p=new a.Text(n.getTimeText(0),{fontSize:.8*e,fill:s,align:"center"});p.position.set(c-p.width/2,r.y+r.height),this.addChild(p),this.timeTextShadow=p;const w=new a.Text(n.getTimeText(0),{fontSize:.8*e,fill:i,align:"center"});w.position.set(c-w.width/2,h.y+h.height),this.addChild(w),this.timeText=w}updateTime(t){const e=(.001*t).toFixed(1);this.timeText.text=n.getTimeText(e),this.timeTextShadow.text=n.getTimeText(e)}updateLevel(t){this.levelText.text=n.getLevelText(t),this.levelTextShadow.text=n.getLevelText(t)}updateOrcs(t){this.orcsText.text=n.getOrcsText(t),this.orcsTextShadow.text=n.getOrcsText(t)}}n.options={padding:20,textColor:16776960,textColorShadow:10013656,textShadowOffset:.5,textSize:40},e.StatusBar=n},665:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TileMap=void 0;const a=i(8687),n=i(5502),o=i(1519),s=i(5473),r=i(1557),h=i(9713),l=i(2188),d=i(7049);class c extends a.Container{constructor(t){super(),this.hitboxes=new a.Container,this.enemies=new a.Container,this.arrows=new a.Container,this.background=new a.Sprite,this.maxXPivot=0,this.maxYPivot=0,this.viewWidth=t.viewWidth,this.viewHeight=t.viewHeight,this.orcTextures=t.orcTextures,this.onEnemiesUpdate=t.onEnemiesUpdate,this.setup()}setup(){this.addChild(this.background),this.addChild(this.hitboxes),this.addChild(this.enemies),this.addChild(this.arrows)}async idleLoad(){await a.Assets.loadBundle(r.manifest.bundles.map((t=>t.name)).filter(((t,e)=>e>0)))}initLevel(t){const e=a.Assets.get(`level${t}Background`),i=a.Assets.get(`level${t}Settings`);this.background.texture=e,n.MapSettings.mapTilesToPositions({mapSettings:i,layerName:"Misc"}).forEach((t=>{this.hitboxes.addChild(new o.Hitbox({initX:t.x,initY:t.y,initWidth:t.width,initHeight:t.height}))}));const s=n.MapSettings.mapObjectToPositions({mapSettings:i,layerName:"Player"});return n.MapSettings.mapObjectToPositions({mapSettings:i,layerName:"Orcs"}).forEach((t=>{const e=new h.Orc({textures:this.orcTextures});e.initX=t.x,e.initY=t.y,e.setCollisionShapePosition(t),this.enemies.addChild(e),e.restart()})),{playerPoint:s[0]}}getViewportBounds(){const{viewWidth:t,viewHeight:e}=this,{pivot:{x:i,y:a}}=this;return{top:a,right:i+t,bottom:a+e,left:i}}handleResize({viewWidth:t,viewHeight:e}){this.viewWidth=t,this.viewHeight=e;const{width:i,height:a,scale:n}=this.background;this.maxXPivot=i>t?(i-t)/n.x:0,this.maxYPivot=a>e?(a-e)/n.y:0,(0,s.logLayout)(`x=${this.x} y=${this.y} w=${i} h=${a}`)}restart(){this.pivot.set(0,0)}cleanFromAll(){for(;null!=this.hitboxes.children[0];)this.hitboxes.children[0].removeFromParent();for(;null!=this.enemies.children[0];)this.enemies.children[0].removeFromParent();for(;null!=this.arrows.children[0];)this.arrows.children[0].removeFromParent()}addPlayer(t){this.player=t,this.addChild(t)}handleUpdate(t){const{player:e}=this,i=e.getCollisionShapeBounds(e);this.enemies.children.forEach((a=>{e.isDead()||a.isDead()||!a.canJumpAndHit(i)||(d.AUDIO.sword.play(),e.setState(l.EBodyState.deadDown)),a.handleUpdate(t)})),this.arrows.children.forEach((e=>{this.enemies.children.filter((t=>!t.isDead())).some((t=>e.isHit({enemy:t})))?(e.markedForDeletion=!0,d.AUDIO.hit.play(),this.onEnemiesUpdate()):e.handleUpdate(t)}));for(let t=0;t<this.arrows.children.length;t++){const e=this.arrows.children[t];e.markedForDeletion=!!e.markedForDeletion||e.isOutOfViewport({top:0,left:0,right:this.background.width,bottom:this.background.height}),e.markedForDeletion&&(e.removeFromParent(),t--)}}getLiveEnemiesCount(){return this.enemies.children.filter((t=>!t.isDead())).length}}e.TileMap=c},6865:(t,e)=>{var i;Object.defineProperty(e,"__esModule",{value:!0}),e.Vector=e.EVectorDirection=void 0,function(t){t.up="up",t.down="down",t.left="left",t.right="right"}(i=e.EVectorDirection||(e.EVectorDirection={})),e.Vector=class{constructor(t){this.setDirection(t)}setDirection({direction:t,speed:e}){switch(this.direction=t,this.speed=e,this.x=0,this.y=0,t){case i.up:this.y=-e;break;case i.down:this.y=e;break;case i.right:this.x=e;break;case i.left:this.x=-e}}move({object:t,dt:e}){t.x+=e*(this.x/1e3),t.y+=e*(this.y/1e3)}stop(){this.x=0,this.y=0}}},6752:(t,e,i)=>{i(7279);const a=i(3110),n=i(6168),o=i(1557);(async function(){const t=document.querySelector(".ellipsis");null!=t&&(t.style.display="none"),await a.SceneManager.initialize();const e=new o.LoaderScene({viewWidth:a.SceneManager.width,viewHeight:a.SceneManager.height});await a.SceneManager.changeScene(e),await e.initializeLoader();const{levelSettings:i,spritesheet:{animations:s,textures:r}}=e.getAssets();await a.SceneManager.changeScene(new n.MainScene({app:a.SceneManager.app,viewWidth:a.SceneManager.width,viewHeight:a.SceneManager.height,levelSettings:i,textures:{elvenTextures:{attackLeftTextures:s["Elven-Attack-Left"],attackRightTextures:s["Elven-Attack-Right"],attackUpTextures:s["Elven-Attack-Up"],attackDownTextures:s["Elven-Attack-Down"],walkLeftTextures:s["Elven-Walk-Left"],walkRightTextures:s["Elven-Walk-Right"],walkUpTextures:s["Elven-Walk-Up"],walkDownTextures:s["Elven-Walk-Down"],deadDownTextures:s["Elven-Dead-Down"]},orcTextures:{attackLeftTextures:s["Orc-Attack-Left"],attackRightTextures:s["Orc-Attack-Right"],attackUpTextures:s["Orc-Attack-Up"],attackDownTextures:s["Orc-Attack-Down"],walkLeftTextures:s["Orc-Walk-Left"],walkRightTextures:s["Orc-Walk-Right"],walkUpTextures:s["Orc-Walk-Up"],walkDownTextures:s["Orc-Walk-Down"],deadDownTextures:s["Orc-Dead-Down"]},arrowTextures:{upTexture:r["Arrow-Up.png"],rightTexture:r["Arrow-Right.png"],downTexture:r["Arrow-Down.png"],leftTexture:r["Arrow-Left.png"]}}}))})().catch((t=>{var e;console.error(t);const i=document.querySelector(".error-message");null!=i&&(i.classList.remove("hidden"),i.innerText=Boolean(t)&&Boolean(t.message)?t.message:t);const a=document.querySelector(".error-stack");null!=a&&(a.classList.remove("hidden"),a.innerText=Boolean(t)&&Boolean(t.stack)?t.stack:"");const n=document.querySelector("canvas");null!=n&&(null===(e=n.parentElement)||void 0===e||e.removeChild(n))}))},7049:function(t,e,i){var a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.AUDIO=void 0;const n=i(1766),o=a(i(323)),s=a(i(1086)),r=a(i(8499));e.AUDIO={arrow:new n.Howl({src:o.default}),sword:new n.Howl({src:s.default}),hit:new n.Howl({src:r.default})}},5473:function(t,e,i){var a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.logHitboxes=e.logPlayerState=e.logBodyState=e.logBodyBounds=e.logInputDirection=e.logKeyup=e.logKeydown=e.logPointerEvent=e.logLayout=e.logApp=void 0;const n=a(i(1227));e.logApp=(0,n.default)("es-app"),e.logLayout=(0,n.default)("es-layout"),e.logPointerEvent=(0,n.default)("es-pointer-event"),e.logKeydown=(0,n.default)("es-keydown"),e.logKeyup=(0,n.default)("es-keyup"),e.logInputDirection=(0,n.default)("es-input-direction"),e.logBodyBounds=(0,n.default)("es-body-bounds"),e.logBodyState=(0,n.default)("es-body-state"),e.logPlayerState=(0,n.default)("es-player-state"),e.logHitboxes=(0,n.default)("es-hitboxes")},323:(t,e,i)=>{t.exports=i.p+"./assets/audio/arrow.wav"},8499:(t,e,i)=>{t.exports=i.p+"./assets/audio/hit.wav"},1086:(t,e,i)=>{t.exports=i.p+"./assets/audio/sword.wav"}},i={};function a(t){var n=i[t];if(void 0!==n)return n.exports;var o=i[t]={id:t,loaded:!1,exports:{}};return e[t].call(o.exports,o,o.exports,a),o.loaded=!0,o.exports}a.m=e,t=[],a.O=(e,i,n,o)=>{if(!i){var s=1/0;for(d=0;d<t.length;d++){for(var[i,n,o]=t[d],r=!0,h=0;h<i.length;h++)(!1&o||s>=o)&&Object.keys(a.O).every((t=>a.O[t](i[h])))?i.splice(h--,1):(r=!1,o<s&&(s=o));if(r){t.splice(d--,1);var l=n();void 0!==l&&(e=l)}}return e}o=o||0;for(var d=t.length;d>0&&t[d-1][2]>o;d--)t[d]=t[d-1];t[d]=[i,n,o]},a.d=(t,e)=>{for(var i in e)a.o(e,i)&&!a.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},a.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),a.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),a.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.nmd=t=>(t.paths=[],t.children||(t.children=[]),t),(()=>{var t;a.g.importScripts&&(t=a.g.location+"");var e=a.g.document;if(!t&&e&&(e.currentScript&&(t=e.currentScript.src),!t)){var i=e.getElementsByTagName("script");i.length&&(t=i[i.length-1].src)}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),a.p=t})(),(()=>{var t={179:0};a.O.j=e=>0===t[e];var e=(e,i)=>{var n,o,[s,r,h]=i,l=0;if(s.some((e=>0!==t[e]))){for(n in r)a.o(r,n)&&(a.m[n]=r[n]);if(h)var d=h(a)}for(e&&e(i);l<s.length;l++)o=s[l],a.o(t,o)&&t[o]&&t[o][0](),t[o]=0;return a.O(d)},i=self.webpackChunksimple_html5_es_game=self.webpackChunksimple_html5_es_game||[];i.forEach(e.bind(null,0)),i.push=e.bind(null,i.push.bind(i))})();var n=a.O(void 0,[736],(()=>a(6752)));n=a.O(n)})();